'''
    problem: https://leetcode.com/problems/detonate-the-maximum-bombs
    concepts: DFS
    #incomplete - 151/164 passed - testcase failing - wrong logic. union find doesn't work as bomb a if in range of bomb b cannot detonate bomb b if its not in range of bomb a
    #todo: complete it
'''
'''
nxn matrix representing distances between bombs
'''
from typing import List
class Solution:
    def maximumDetonation(self, bombs: List[List[int]]) -> int:
        n = len(bombs)
        distances = [[float('inf')]*n for _ in range(n)]
        for i in range(n):
            distances[i][i] = 0
            for j in range(n//2):
                x1, y1, r1 = bombs[i]
                x2, y2, r2 = bombs[j]
                dist = ((x2-x1)**2 + (y2-y1)**2)**0.5
                distances[i][j] = dist
                distances[j][i] = dist
        # print(distances)
        visited = dict()
        ranks = [1] * n
        parents = [i for i in range(n)]
        def find(b1):
            res = b1
            while res != parents[res]:
                parents[res] = parents[parents[res]]
                res = parents[res]
            return res
        def union(b1, b2):
            p1, p2 = find(b1), find(b2)
            if p1 == p2:
                return 0
            if ranks[p1] > ranks[p2]:
                ranks[p1] += ranks[p2]
                parents[p2] = parents[p1]
            else:
                ranks[p2] += ranks[p1]
                parents[p1] = parents[p2]
            return 1
        def dfs(curIndex):
            if curIndex in visited:
                return
            visited[curIndex] = True
            for i in range(curIndex+1, n):
                if i not in visited and (distances[curIndex][i] <= bombs[i][2] or distances[curIndex][i] <= bombs[curIndex][2]):
                    union(i, curIndex)
                    dfs(i)
        for i in range(n):
            if i not in visited:
                dfs(i)
        return max(ranks)

print(Solution().maximumDetonation([[542,865,377], [986,697,443]]))
distances = [[0.0, 8.0, 16.492422502470642, 26.0, 4.123105625617661, 78.05767098754612, 76.84399781375251, 70.03570517957252, 33.61547262794322, 49.73932046178355, 76.84399781375251, 50.15974481593781, 52.009614495783374, 95.4148835350125, 68.8839603971781], [8.0, 0.0, 8.94427190999916, 33.52610922848042, 8.06225774829855, 78.16009211867653, 79.7057087039567, 75.7429864739964, 37.44329045369811, 54.20332093147061, 84.48076704197234, 47.53945729601885, 52.773099207835045, 100.0, 72.94518489934754], [16.492422502470642, 8.94427190999916, 0.0, 42.37924020083418, 15.0, 83.02409288875127, 86.76981041814025, 84.38601779915912, 45.45327270945405, 62.369864518050704, 93.30058949438637, 50.15974481593781, 58.52349955359813, 108.07404868885037, 80.80222769206304], [26.0, 33.52610922848042, 42.37924020083418, 0.0, 28.653097563788805, 73.16419889536138, 63.0, 47.50789408087881, 23.706539182259394, 33.015148038438355, 50.96076922496363, 56.85068161420758, 47.885279575251516, 75.39230729988306, 51.62363799656123], [4.123105625617661, 8.06225774829855, 15.0, 28.653097563788805, 0.0, 82.02438661763951, 80.95677859203639, 73.66138744281159, 37.69615364994153, 53.71219600798314, 79.12016177940993, 53.48831648126533, 56.0357029044876, 99.32270636667126, 72.89718787443039], [78.05767098754612, 78.16009211867653, 83.02409288875127, 73.16419889536138, 82.02438661763951, 0.0, 27.459060435491963, 57.706152185014034, 49.64876634922564, 44.82186966202994, 93.23089616645332, 36.235341863986875, 26.30589287593181, 55.036351623268054, 38.91015291668744], [76.84399781375251, 79.7057087039567, 86.76981041814025, 63.0, 80.95677859203639, 27.459060435491963, 0.0, 32.55764119219941, 43.41658669218482, 30.01666203960727, 69.29646455628166, 51.62363799656123, 31.144823004794873, 28.861739379323623, 14.422205101855956], [70.03570517957252, 75.7429864739964, 84.38601779915912, 47.50789408087881, 73.66138744281159, 57.706152185014034, 32.55764119219941, 0.0, 40.311288741492746, 24.351591323771842, 36.796738985948195, 68.18357573492314, 47.01063709417264, 29.274562336608895, 18.867962264113206], [33.61547262794322, 37.44329045369811, 45.45327270945405, 23.706539182259394, 37.69615364994153, 49.64876634922564, 43.41658669218482, 40.311288741492746, 0.0, 16.97056274847714, 60.40695324215582, 36.24913792078372, 24.186773244895647, 62.625873247404705, 35.510561809129406], [49.73932046178355, 54.20332093147061, 62.369864518050704, 33.015148038438355, 53.71219600798314, 44.82186966202994, 30.01666203960727, 24.351591323771842, 16.97056274847714, 0.0, 51.62363799656123, 45.09988913511872, 25.632011235952593, 45.803929962395145, 19.313207915827967], [76.84399781375251, 84.48076704197234, 93.30058949438637, 50.96076922496363, 79.12016177940993, 93.23089616645332, 69.29646455628166, 36.796738985948195, 60.40695324215582, 51.62363799656123, 0.0, 95.56673061269805, 77.25283166331187, 59.80802621722272, 55.226805085936306], [50.15974481593781, 47.53945729601885, 50.15974481593781, 56.85068161420758, 53.48831648126533, 36.235341863986875, 51.62363799656123, 68.18357573492314, 36.24913792078372, 45.09988913511872, 95.56673061269805, 0.0, 21.840329667841555, 79.62411694957753, 54.120236510939236], [52.009614495783374, 52.773099207835045, 58.52349955359813, 47.885279575251516, 56.0357029044876, 26.30589287593181, 31.144823004794873, 47.01063709417264, 24.186773244895647, 25.632011235952593, 77.25283166331187, 21.840329667841555, 0.0, 58.180752831155424, 32.28002478313795], [95.4148835350125, 100.0, 108.07404868885037, 75.39230729988306, 99.32270636667126, 55.036351623268054, 28.861739379323623, 29.274562336608895, 62.625873247404705, 45.803929962395145, 59.80802621722272, 79.62411694957753, 58.180752831155424, 0.0, 27.586228448267445], [68.8839603971781, 72.94518489934754, 80.80222769206304, 51.62363799656123, 72.89718787443039, 38.91015291668744, 14.422205101855956, 18.867962264113206, 35.510561809129406, 19.313207915827967, 55.226805085936306, 54.120236510939236, 32.28002478313795, 27.586228448267445, 0.0]]
bombs = [[7,26,7],[7,18,4],[3,10,7],[17,50,1],[3,25,10],[85,23,8],[80,50,1],[58,74,1],[38,39,7],[50,51,8],[31,99,3],[53,6,5],[59,27,10],[87,78,9],[68,58,3]]

[0, 1, 2, 3, 0, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]


distances2 = [[0.0, 1052.6219644297757, 1019.5592184861064, 483.39011160759173, 577.7646579707, 752.1542395014469, 397.57389250301634, 849.1436863099201, 781.4460953898227, 1067.911044984553, 843.2425511085171, 614.837376872942, 178.64489917151286, 628.7972646250936, 439.6043675852186, 462.00108224981466, 796.4376937337911], [1052.6219644297757, 0.0, 81.8413098624405, 788.4700374776457, 679.0913046122738, 550.9564411094583, 720.44014324578, 359.8055030151707, 283.2331195323033, 278.3684608571883, 544.9229303305193, 445.4862511907635, 874.4192358359919, 969.2497098271425, 620.519943273381, 740.5538467930606, 332.7100840070827], [1019.5592184861064, 81.8413098624405, 0.0, 792.4121402401656, 612.862953685406, 475.4208661806926, 708.7171509142416, 396.72912673510626, 238.64827675891564, 204.41379601191306, 464.9569872579613, 427.68680129272167, 840.9215183356887, 897.940421186172, 597.2947346160017, 739.8878293363123, 352.94475488382034], [483.39011160759173, 788.4700374776457, 792.4121402401656, 0.0, 694.5401356293241, 782.177729163903, 162.82813024781683, 471.87392383983246, 600.0566639909935, 926.4858336747519, 864.094902195355, 387.7383138148718, 389.17862222891944, 913.5097153287425, 294.7303852676205, 66.21933252457322, 461.02602963390257], [577.7646579707, 679.0913046122738, 612.862953685406, 694.5401356293241, 0.0, 188.35073665903195, 532.7785656349174, 694.7438376840777, 413.8816255887666, 569.0360269789603, 273.2068813189009, 430.20576472195256, 437.96118549478786, 301.24076749337894, 404.96913462633177, 629.9436482733992, 609.4727229335206], [752.1542395014469, 550.9564411094583, 475.4208661806926, 782.177729163903, 188.35073665903195, 0.0, 630.1468082915283, 659.0667644480337, 332.05120087119093, 393.15391388106514, 91.92388155425118, 441.7023884925233, 597.4562745506988, 428.3479893731264, 489.1175727777525, 715.9671780186575, 574.0078396677175], [397.57389250301634, 720.44014324578, 708.7171509142416, 162.82813024781683, 532.7785656349174, 630.1468082915283, 0.0, 460.1847455098876, 491.54959058064526, 816.1942170831646, 715.2656849031694, 281.8865019826242, 259.9249891795708, 753.2151087172907, 142.1724305201258, 101.83319694480774, 420.2023322162789], [849.1436863099201, 359.8055030151707, 396.72912673510626, 471.87392383983246, 694.7438376840777, 659.0667644480337, 460.1847455098876, 0.0, 334.8566857627304, 585.2836918965024, 702.2371394336816, 280.01785657346926, 686.3912878234979, 991.6577030407216, 423.02364000135975, 440.45431091090484, 86.09297300012354], [781.4460953898227, 283.2331195323033, 238.64827675891564, 600.0566639909935, 413.8816255887666, 332.05120087119093, 491.54959058064526, 334.8566857627304, 0.0, 326.9556544854363, 367.7390379059585, 213.43148783626094, 602.8797558385918, 713.4479658671683, 367.72000217556837, 540.3785710036992, 253.80504329110562], [1067.911044984553, 278.3684608571883, 204.41379601191306, 926.4858336747519, 569.0360269789603, 393.15391388106514, 816.1942170831646, 585.2836918965024, 326.9556544854363, 0.0, 345.60671289776764, 540.3785710036992, 893.4808335940957, 817.0410026430742, 685.9460620194565, 867.2929147640951, 527.3604080702305], [843.2425511085171, 544.9229303305193, 464.9569872579613, 864.094902195355, 273.2068813189009, 91.92388155425118, 715.2656849031694, 702.2371394336816, 367.7390379059585, 345.60671289776764, 0.0, 509.2278468426486, 689.3765299167067, 474.72097067645956, 573.4125914208721, 798.0332073291186, 619.5361167841629], [614.837376872942, 445.4862511907635, 427.68680129272167, 387.7383138148718, 430.20576472195256, 441.7023884925233, 281.8865019826242, 280.01785657346926, 213.43148783626094, 540.3785710036992, 509.2278468426486, 0.0, 439.6691938264495, 719.2781103300725, 176.40011337864837, 327.1238297648155, 203.0221662774782], [178.64489917151286, 874.4192358359919, 840.9215183356887, 389.17862222891944, 437.96118549478786, 597.4562745506988, 259.9249891795708, 686.3912878234979, 602.8797558385918, 893.4808335940957, 689.3765299167067, 439.6691938264495, 0.0, 564.5883456112073, 267.22649569232465, 347.6391807607422, 627.7618975375934], [628.7972646250936, 969.2497098271425, 897.940421186172, 913.5097153287425, 301.24076749337894, 428.3479893731264, 753.2151087172907, 991.6577030407216, 713.4479658671683, 817.0410026430742, 474.72097067645956, 719.2781103300725, 564.5883456112073, 0.0, 652.7066722502536, 855.046782345855, 907.2733876842194], [439.6043675852186, 620.519943273381, 597.2947346160017, 294.7303852676205, 404.96913462633177, 489.1175727777525, 142.1724305201258, 423.02364000135975, 367.72000217556837, 685.9460620194565, 573.4125914208721, 176.40011337864837, 267.22649569232465, 652.7066722502536, 0.0, 228.7116088002531, 360.855926929294], [462.00108224981466, 740.5538467930606, 739.8878293363123, 66.21933252457322, 629.9436482733992, 715.9671780186575, 101.83319694480774, 440.45431091090484, 540.3785710036992, 867.2929147640951, 798.0332073291186, 327.1238297648155, 347.6391807607422, 855.046782345855, 228.7116088002531, 0.0, 419.2040076144311], [796.4376937337911, 332.7100840070827, 352.94475488382034, 461.02602963390257, 609.4727229335206, 574.0078396677175, 420.2023322162789, 86.09297300012354, 253.80504329110562, 527.3604080702305, 619.5361167841629, 203.0221662774782, 627.7618975375934, 907.2733876842194, 360.855926929294, 419.2040076144311, 0.0]]
bombs2 = [[855,82,158],[17,719,430],[90,756,164],[376,17,340],[691,636,152],[565,776,5],[464,154,271],[53,361,162],[278,609,82],[202,927,219],[542,865,377],[330,402,270],[720,199,10],[986,697,443],[471,296,69],[393,81,404],[127,405,177]]
[0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 3, 1, 1, 1, 1]
{0: True, 1: True, 2: True, 9: True, 10: True, 7: True, 16: True, 8: True, 11: True, 14: True, 15: True, 3: True, 6: True, 12: True, 4: True, 13: True, 5: True}
